<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GrantFinder ‚Äî Talabalar uchun Grant va Tanlovlar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .active-nav { color: #4f46e5; font-weight: 600; }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- üîπ Navbar -->
  <nav class="bg-white shadow-md sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center p-4">
      <h1 class="text-2xl font-bold text-indigo-600">GrantFinder</h1>
      <div class="space-x-6 text-sm">
        <button onclick="showPage('home')" id="nav-home">Bosh sahifa</button>
        <button onclick="showPage('grants')" id="nav-grants">Grantlar</button>
        <button onclick="showPage('contests')" id="nav-contests">Tanlovlar</button>
        <button onclick="showPage('favorites')" id="nav-favorites">Sevimlilar</button>
        <button onclick="showPage('about')" id="nav-about">Biz haqimizda</button>
        <button onclick="showPage('adminLogin')" id="nav-admin">Admin</button>
      </div>
    </div>
  </nav>

  <!-- üîπ Bosh sahifa -->
  <section id="home" class="container mx-auto p-6 text-center" data-aos="fade-up">
    <h2 class="text-3xl font-bold text-indigo-600 mb-3">Talabalar uchun eng so‚Äònggi grantlar va tanlovlar</h2>
    <p class="text-gray-600 mb-6">GrantFinder bilan o‚Äòzingizga mos imkoniyatlarni toping va orzular sari bir qadam tashlang!</p>
    <button onclick="showPage('grants')" class="bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition">
      Grantlarni ko‚Äòrish
    </button>
  </section>

  <!-- üîπ Grantlar -->
  <section id="grants" class="hidden container mx-auto p-6" data-aos="fade-up">
    <h2 class="text-2xl font-bold mb-4">Grantlar</h2>
    <input type="text" id="grantSearch" placeholder="Grantlarni qidirish..." class="w-full border rounded-xl p-3 mb-5" onkeyup="filterItems('grant')">
    <div id="grantList" class="grid md:grid-cols-3 gap-4"></div>
  </section>

  <!-- üîπ Tanlovlar -->
  <section id="contests" class="hidden container mx-auto p-6" data-aos="fade-up">
    <h2 class="text-2xl font-bold mb-4">Tanlovlar</h2>
    <input type="text" id="contestSearch" placeholder="Tanlovlarni qidirish..." class="w-full border rounded-xl p-3 mb-5" onkeyup="filterItems('contest')">
    <div id="contestList" class="grid md:grid-cols-3 gap-4"></div>
  </section>

  <!-- üîπ Sevimlilar -->
  <section id="favorites" class="hidden container mx-auto p-6" data-aos="fade-up">
    <h2 class="text-2xl font-bold mb-4">Sevimli grantlar va tanlovlar</h2>
    <div id="favoriteList" class="grid md:grid-cols-3 gap-4"></div>
  </section>

  <!-- üîπ Biz haqimizda -->
  <section id="about" class="hidden container mx-auto p-6 text-center" data-aos="fade-up">
    <h2 class="text-2xl font-bold mb-3">Biz haqimizda</h2>
    <p class="text-gray-600 mb-6">GrantFinder ‚Äî talabalar uchun eng dolzarb xalqaro va mahalliy grantlar hamda tanlovlarni bir joyda to‚Äòplovchi platforma.</p>
  </section>

  <!-- üîπ Admin Login -->
  <section id="adminLogin" class="hidden container mx-auto p-6 text-center" data-aos="zoom-in">
    <h2 class="text-2xl font-bold mb-4">Admin tizimiga kirish</h2>
    <div class="max-w-sm mx-auto bg-white p-6 rounded-xl shadow">
      <input id="adminUser" type="text" placeholder="Login" class="border w-full p-2 mb-3 rounded">
      <input id="adminPass" type="password" placeholder="Parol" class="border w-full p-2 mb-3 rounded">
      <button onclick="adminLogin()" class="bg-indigo-600 text-white w-full py-2 rounded-lg hover:bg-indigo-700">Kirish</button>
      <p id="loginError" class="text-red-500 mt-2 hidden">‚ùå Login yoki parol xato!</p>
    </div>
  </section>

  <!-- üîπ Admin Panel -->
  <section id="adminPanel" class="hidden container mx-auto p-6" data-aos="fade-up">
    <h2 class="text-2xl font-bold mb-4">Admin Panel</h2>

    <!-- Qo‚Äòshish -->
    <div class="bg-white p-4 rounded-xl shadow mb-6">
      <h3 class="font-semibold mb-3">Yangi grant/tanlov qo‚Äòshish</h3>
      <select id="itemType" class="border p-2 rounded w-full mb-2">
        <option value="grant">Grant</option>
        <option value="contest">Tanlov</option>
      </select>
      <input id="newTitle" type="text" placeholder="Nomi" class="border p-2 w-full mb-2 rounded">
      <textarea id="newDesc" placeholder="Tavsif" class="border p-2 w-full mb-2 rounded"></textarea>
      <input id="newImage" type="file" accept="image/*" class="border p-2 w-full mb-2 rounded">
      <button onclick="addItem()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Qo‚Äòshish</button>
    </div>

    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <h3 class="text-xl font-semibold mb-3">Grantlar</h3>
        <div id="adminGrantList" class="grid gap-3"></div>
      </div>
      <div>
        <h3 class="text-xl font-semibold mb-3">Tanlovlar</h3>
        <div id="adminContestList" class="grid gap-3"></div>
      </div>
    </div>

    <button onclick="logoutAdmin()" class="mt-6 bg-red-500 text-white px-4 py-2 rounded">Chiqish</button>
  </section>

  <!-- üîπ Footer -->
  <footer class="bg-white text-center p-4 shadow-inner mt-6">
    <p class="text-sm text-gray-500">¬© 2025 GrantFinder. Barcha huquqlar himoyalangan.</p>
  </footer>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({ duration: 800, once: true });

    const pages = ['home','grants','contests','favorites','about','adminLogin','adminPanel'];
    function showPage(page) {
      pages.forEach(p => {
        document.getElementById(p).classList.add('hidden');
        const nav = document.getElementById('nav-' + p);
        if (nav) nav.classList.remove('active-nav');
      });
      document.getElementById(page).classList.remove('hidden');
      const nav = document.getElementById('nav-' + page);
      if (nav) nav.classList.add('active-nav');
    }

    let grants = JSON.parse(localStorage.getItem('grants')) || [];
    let contests = JSON.parse(localStorage.getItem('contests')) || [];
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

    const grantList = document.getElementById('grantList');
    const contestList = document.getElementById('contestList');
    const favoriteList = document.getElementById('favoriteList');
    const adminGrantList = document.getElementById('adminGrantList');
    const adminContestList = document.getElementById('adminContestList');

    // üîπ Render funksiyalar
    function renderItems(type) {
      const list = type === 'grant' ? grantList : contestList;
      const data = type === 'grant' ? grants : contests;
      list.innerHTML = '';
      data.forEach(item => {
        const card = document.createElement('div');
        card.className = "border rounded-2xl p-5 shadow bg-white hover:shadow-lg transition";
        card.setAttribute('data-aos', 'zoom-in');
        card.innerHTML = `
          ${item.image ? `<img src="${item.image}" class="rounded-xl mb-3 w-full h-48 object-cover">` : ''}
          <h3 class="text-lg font-semibold mb-2">${item.title}</h3>
          <p class="text-gray-600 mb-3">${item.desc}</p>
          <button onclick="toggleFavorite('${type}',${item.id})" class="px-4 py-2 rounded-lg text-white ${favorites.some(f => f.type===type && f.id===item.id)?'bg-red-500':'bg-indigo-600'}">
            ${favorites.some(f => f.type===type && f.id===item.id)?'‚ù§Ô∏è Sevimlidan olib tashlash':'ü§ç Sevimlilarga qo‚Äòshish'}
          </button>`;
        list.appendChild(card);
      });
    }

    function renderFavorites() {
      favoriteList.innerHTML = '';
      if (favorites.length === 0) {
        favoriteList.innerHTML = '<p class="text-gray-600">Sevimlilar hozircha mavjud emas.</p>';
        return;
      }
      favorites.forEach(f => {
        const card = document.createElement('div');
        card.className = "border rounded-2xl p-5 shadow bg-white hover:shadow-lg transition";
        card.innerHTML = `
          ${f.image ? `<img src="${f.image}" class="rounded-xl mb-3 w-full h-48 object-cover">` : ''}
          <h3 class="text-lg font-semibold mb-2">${f.title}</h3>
          <p class="text-gray-600 mb-3">${f.desc}</p>
          <button onclick="toggleFavorite('${f.type}',${f.id})" class="px-4 py-2 rounded-lg text-white bg-red-500">‚ùå O‚Äòchirish</button>`;
        favoriteList.appendChild(card);
      });
    }

    function filterItems(type) {
      const query = document.getElementById(type+'Search').value.toLowerCase();
      document.querySelectorAll('#'+type+'List div').forEach(div => {
        const title = div.querySelector('h3').textContent.toLowerCase();
        div.style.display = title.includes(query)?'block':'none';
      });
    }

    function toggleFavorite(type,id){
      const data = type==='grant'?grants:contests;
      const item = data.find(i=>i.id===id);
      const exists = favorites.some(f=>f.type===type && f.id===id);
      favorites = exists ? favorites.filter(f=>!(f.type===type && f.id===id)) : [...favorites,{...item,type}];
      localStorage.setItem('favorites',JSON.stringify(favorites));
      renderItems('grant'); renderItems('contest'); renderFavorites();
    }

    const ADMIN_USER='admin'; const ADMIN_PASS='12345';
    function adminLogin(){
      const u=document.getElementById('adminUser').value;
      const p=document.getElementById('adminPass').value;
      if(u===ADMIN_USER && p===ADMIN_PASS){
        localStorage.setItem('isAdmin','true');
        document.getElementById('loginError').classList.add('hidden');
        showPage('adminPanel');
        renderAdminLists();
      } else {
        document.getElementById('loginError').classList.remove('hidden');
      }
    }

    function logoutAdmin(){ localStorage.removeItem('isAdmin'); showPage('home'); }

    // üîπ Admin CRUD
    function renderAdminLists(){
      adminGrantList.innerHTML=''; adminContestList.innerHTML='';
      grants.forEach(g=>{
        const div=document.createElement('div');
        div.className="border p-3 rounded shadow bg-white flex justify-between";
        div.innerHTML=`<span>${g.title}</span><button onclick="deleteItem('grant',${g.id})" class="text-red-600">üóëÔ∏è</button>`;
        adminGrantList.appendChild(div);
      });
      contests.forEach(c=>{
        const div=document.createElement('div');
        div.className="border p-3 rounded shadow bg-white flex justify-between";
        div.innerHTML=`<span>${c.title}</span><button onclick="deleteItem('contest',${c.id})" class="text-red-600">üóëÔ∏è</button>`;
        adminContestList.appendChild(div);
      });
    }

    function addItem(){
      const type=document.getElementById('itemType').value;
      const title=document.getElementById('newTitle').value.trim();
      const desc=document.getElementById('newDesc').value.trim();
      const imageInput=document.getElementById('newImage');
      if(!title||!desc)return alert('Iltimos, maydonlarni to‚Äòldiring!');

      const reader=new FileReader();
      const addData=(imgData)=>{
        const item={id:Date.now(),title,desc,image:imgData};
        if(type==='grant'){grants.push(item); localStorage.setItem('grants',JSON.stringify(grants));}
        else{contests.push(item); localStorage.setItem('contests',JSON.stringify(contests));}
        renderItems('grant'); renderItems('contest'); renderAdminLists();
        document.getElementById('newTitle').value=''; document.getElementById('newDesc').value=''; imageInput.value='';
        alert("‚úÖ Yangi "+(type==='grant'?'grant':'tanlov')+" qo‚Äòshildi!");
      };
      if(imageInput.files.length>0){
        reader.onload=()=>addData(reader.result);
        reader.readAsDataURL(imageInput.files[0]);
      } else addData(null);
    }

    function deleteItem(type,id){
      if(type==='grant'){grants=grants.filter(g=>g.id!==id); localStorage.setItem('grants',JSON.stringify(grants));}
      else{contests=contests.filter(c=>c.id!==id); localStorage.setItem('contests',JSON.stringify(contests));}
      renderItems('grant'); renderItems('contest'); renderAdminLists();
    }

    renderItems('grant'); renderItems('contest'); renderFavorites();
    if(localStorage.getItem('isAdmin')==='true'){showPage('adminPanel'); renderAdminLists();}
  </script>
</body>
</html>
